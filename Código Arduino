int pulsador = 6;
int LEDV = 5;
int LEDR = 4;
int estado=LOW;
long int tiempo1 =0;
long int tiempo2 =0;
float time =0;
String mensaje_entrada;
String mensaje_salida;

void setup() {
  pinMode(pulsador, INPUT);
  pinMode(LEDV, OUTPUT);
  pinMode(LEDR, OUTPUT);
  digitalWrite(LEDV, LOW);
  digitalWrite(LEDR, HIGH);
  Serial.begin(9600);
  while(!Serial) { ; }
}

void loop() {
  if(Serial.available()>0){
    mensaje_entrada = Serial.readStringUntil('\n');
    if (mensaje_entrada.compareTo("START_TEST")==0){
  delay(random(2500, 10000));
  digitalWrite(LEDR, LOW);
  tiempo1 = millis();
  digitalWrite(LEDV, HIGH);
  while(digitalRead(pulsador)== LOW);
  estado = digitalRead(LEDV);
  digitalWrite(LEDV, !estado);
  tiempo2 = millis();
  time = tiempo2 - tiempo1;
  mensaje_salida = (String) time;
  while(digitalRead(pulsador)==HIGH);
    }else{
      mensaje_salida = "COMANDO DESCONOCIDO";
      }
      Serial.println(mensaje_salida);
  }
  exit(0);
}
